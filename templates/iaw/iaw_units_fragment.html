<!-- ============================================================
     BOSK-CAD â€” IAW UNITS FRAGMENT
     Phase-3 Enterprise Edition
     templates/iaw/iaw_units_fragment.html
============================================================ -->

{% if units|length == 0 %}

    <div class="iaw-no-units">No units assigned.</div>

{% else %}

<table class="iaw-units-table">
    <thead>
        <tr>
            <th style="width:40px;">Icon</th>
            <th style="width:70px;">Unit</th>
            <th>Dispatched</th>
            <th>Enroute</th>
            <th>Arrived</th>
            <th>Clear</th>
            <th style="width:160px;">Action</th>
        </tr>
    </thead>

    <tbody>
        {% for u in units %}
        <tr class="iaw-unit-row">

            <!-- ICON -->
            <td class="iaw-unit-icon">
                <img src="/static/images/{{ u.icon }}"
                     alt="{{ u.unit_id }}"
                     class="unit-icon-20">
            </td>

            <!-- UNIT NAME -->
            <td class="iaw-unit-name">
                {{ u.unit_id }}
            </td>

            <!-- DISPATCHED -->
            <td class="iaw-unit-time {{ 'time-active' if u.dispatched }}">
                {{ u.dispatched or '' }}
            </td>

            <!-- ENROUTE -->
            <td class="iaw-unit-time {{ 'time-active' if u.enroute }}">
                {{ u.enroute or '' }}
            </td>

            <!-- ARRIVED -->
            <td class="iaw-unit-time {{ 'time-active' if u.arrived }}">
                {{ u.arrived or '' }}
            </td>

            <!-- CLEAR -->
            <td class="iaw-unit-time {{ 'time-active' if u.cleared }}">
                {{ u.cleared or '' }}
            </td>


            <!-- ACTION BUTTONS -->
            <td class="iaw-unit-actions">

                <button class="iaw-unit-btn"
                        onclick="IAW.unitStatus('{{ u.unit_id }}','ENROUTE',{{ incident_id }})">
                    Enroute
                </button>

                <button class="iaw-unit-btn"
                        onclick="IAW.unitStatus('{{ u.unit_id }}','ARRIVED',{{ incident_id }})">
                    Arrived
                </button>

                <button class="iaw-unit-btn"
                        onclick="IAW.unitStatus('{{ u.unit_id }}','CLEAR',{{ incident_id }})">
                    Clear
                </button>

            </td>

        </tr>
        {% endfor %}
    </tbody>
</table>

{% endif %}
