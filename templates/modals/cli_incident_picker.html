<!-- =========================================================================
  FORD CAD — CLI INCIDENT PICKER MODAL
  Used when dispatcher types: 18 D  (no incident specified)
============================================================================= -->

<div class="modal-overlay">
  <div class="cad-modal cli-incident-picker-modal">
    <div class="modal-header">
      <div class="modal-title">
        Select Incident (CLI Dispatch)
      </div>
      <button class="modal-close" onclick="CAD_MODAL.close()">×</button>
    </div>

    <div class="modal-body">
      <div style="margin-bottom:10px;">
        <strong>Units:</strong> {{ units_csv or "(none)" }}
        &nbsp;&nbsp;|&nbsp;&nbsp;
        <strong>Mode:</strong> {{ mode or "D" }}
      </div>

      <div style="margin-bottom:14px;">
        <div style="font-weight:600; margin-bottom:6px;">OPEN</div>
        {% if not open_incidents %}
          <div style="opacity:.75;">(none)</div>
        {% else %}
          <table class="dispatch-picker-table">
            <thead>
              <tr>
                <th></th>
                <th>#</th>
                <th>Type</th>
                <th>Location</th>
                <th>Updated</th>
              </tr>
            </thead>
            <tbody>
            {% for i in open_incidents %}
              <tr style="cursor:pointer;" onclick="CAD.cli.pickIncident({{ i.incident_id }})">
                <td class="issue-flag">{% if i.issue_flag %}⚠{% endif %}</td>
                <td class="incident-id">{{ i.incident_number if i.incident_number else "NO#" }}</td>
                <td>{{ i.type }}</td>
                <td>{{ i.location }}</td>
                <td>{{ i.updated }}</td>
              </tr>
            {% endfor %}
            </tbody>
          </table>
        {% endif %}
      </div>

      <div style="margin-bottom:14px;">
        <div style="font-weight:600; margin-bottom:6px;">ACTIVE</div>
        {% if not active_incidents %}
          <div style="opacity:.75;">(none)</div>
        {% else %}
          <table class="dispatch-picker-table">
            <thead>
              <tr>
                <th></th>
                <th>#</th>
                <th>Type</th>
                <th>Location</th>
                <th>Updated</th>
              </tr>
            </thead>
            <tbody>
            {% for i in active_incidents %}
              <tr style="cursor:pointer;" onclick="CAD.cli.pickIncident({{ i.incident_id }})">
                <td class="issue-flag">{% if i.issue_flag %}⚠{% endif %}</td>
                <td class="incident-id">{{ i.incident_number if i.incident_number else "NO#" }}</td>
                <td>{{ i.type }}</td>
                <td>{{ i.location }}</td>
                <td>{{ i.updated }}</td>
              </tr>
            {% endfor %}
            </tbody>
          </table>
        {% endif %}
      </div>

      <div style="margin-bottom:14px;">
        <div style="font-weight:600; margin-bottom:6px;">HELD</div>
        {% if not held_incidents %}
          <div style="opacity:.75;">(none)</div>
        {% else %}
          <table class="dispatch-picker-table">
            <thead>
              <tr>
                <th></th>
                <th>#</th>
                <th>Type</th>
                <th>Location</th>
                <th>Updated</th>
              </tr>
            </thead>
            <tbody>
            {% for i in held_incidents %}
              <tr style="cursor:pointer;" onclick="CAD.cli.pickIncident({{ i.incident_id }})">
                <td class="issue-flag">{% if i.issue_flag %}⚠{% endif %}</td>
                <td class="incident-id">{{ i.incident_number if i.incident_number else "NO#" }}</td>
                <td>{{ i.type }}</td>
                <td>{{ i.location }}</td>
                <td>{{ i.updated }}</td>
              </tr>
            {% endfor %}
            </tbody>
          </table>
        {% endif %}
      </div>

      <details>
        <summary style="cursor:pointer; font-weight:600;">
          CLOSED (clicking will REOPEN it)
        </summary>

        <div style="margin-top:10px;">
          {% if not closed_incidents %}
            <div style="opacity:.75;">(none)</div>
          {% else %}
            <table class="dispatch-picker-table">
              <thead>
                <tr>
                  <th></th>
                  <th>#</th>
                  <th>Type</th>
                  <th>Location</th>
                  <th>Updated</th>
                </tr>
              </thead>
              <tbody>
              {% for i in closed_incidents %}
                <tr style="cursor:pointer;" onclick="CAD.cli.pickIncident({{ i.incident_id }})">
                  <td class="issue-flag">{% if i.issue_flag %}⚠{% endif %}</td>
                  <td class="incident-id">{{ i.incident_number if i.incident_number else "NO#" }}</td>
                  <td>{{ i.type }}</td>
                  <td>{{ i.location }}</td>
                  <td>{{ i.updated }}</td>
                </tr>
              {% endfor %}
              </tbody>
            </table>
          {% endif %}
        </div>
      </details>

      <div style="margin-top:14px; opacity:.75; font-size:12px;">
        Tip: If you meant a different command, type HELP in the CLI.
      </div>
    </div>
  </div>
</div>
