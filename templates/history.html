<!-- ============================================================
     FORD-CAD — INCIDENT HISTORY LIST
     Phase-3 Canon • Full File
     ============================================================ -->

<div class="cad-modal-overlay" onclick="CAD_MODAL.close()"></div>

<div class="cad-modal history-modal">
    <div class="cad-modal-body">

        <div class="history-panel">

            <div class="history-header">
                <h3>Incident History</h3>
                <button class="pill-btn" onclick="CAD_MODAL.close()">Close</button>
            </div>

            <table class="history-table">
                <thead>
                    <tr>
                        <th style="width:90px;">Run</th>
                        <th>Date</th>
                        <th>Type</th>
                        <th>Location</th>
                        <th>Status</th>
                    </tr>
                </thead>

                <tbody>
                {% if incidents|length == 0 %}
                    <tr>
                        <td colspan="5" class="history-empty">No historical incidents.</td>
                    </tr>
                {% else %}
                    {% for i in incidents %}
                    <tr class="history-row"
                        style="cursor:pointer;"
                        onclick="CAD_MODAL.open('/history/{{ i.incident_id }}')">
                        <td>{{ i.incident_number }}</td>
                        <td>{{ i.incident_date }}</td>
                        <td>{{ i.type }}</td>
                        <td>{{ i.location }}</td>
                        <td>{{ i.status }}</td>
                    </tr>
                    {% endfor %}
                {% endif %}
                </tbody>
            </table>

        </div>

    </div>
</div>

<style>
.history-panel { padding: 8px; overflow-y:auto; }
.history-header { display:flex; align-items:center; justify-content:space-between; gap:10px; margin:0 0 6px 0; }
.history-header h3 { margin:0; color:#e2e8f0; font-size:18px; }
.history-table { width:100%; border-collapse:collapse; font-size:14px; }
.history-table th { padding:3px 6px; background:rgba(255,255,255,0.06); border-bottom:1px solid #253244; }
.history-table td { padding:4px 6px; border-bottom:1px solid #1d2733; color:#d7dde8; }
.history-empty { text-align:center; opacity:0.5; padding:10px; }
</style>
